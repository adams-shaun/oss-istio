istio_cni:
  enabled: true
sidecarInjectorWebhook:
  injectedAnnotations:
    k8s.v1.cni.cncf.io/networks: istio-cni

pilot:
  env:
    ISTIO_DUAL_STACK: "true"

meshConfig:
  accessLogFile: /dev/stdout
  defaultConfig:
    proxyMetadata:
      ISTIO_AGENT_DUAL_STACK: "true"
    proxyStatsMatcher:
      inclusionRegexps:
        - f5_tap.*
        - aspenmesh_packet_inspector.*
        - f5_diameter.*
  accessLogFile: ""
  outboundTrafficPolicy: 
    mode: ALLOW_ANY

global:
  hub: localhost:5000
  tag: istio-testing
  # ingressGatewayDualStack: true
  # dualStack: true
  # imagePullSecrets:
  # - aspen-mesh-pull-secret
  # - aspenmesh-istio-private-pr-pull-secret-pull-secret
  # - aspenmesh-dev-test-artifacts-pull-secret
  # - aspen-mesh-cni-pull-secret
  # certificateCustomFields: true
  proxy:
    # image: proxyv2-debug
    logLevel: info
    # componentLogLevel: misc:debug
  logging:
    level: default:debug

cni:
# Configuration file to insert istio-cni plugin configuration
# by default this will be the first file found in the cni-conf-dir
# Example
# cniConfFileName: 10-calico.conflist
  logLevel: debug
  # CNI bin and conf dir override settings
  # defaults:
  cniBinDir: /opt/cni/bin
  cniConfDir: /etc/cni/net.d
  cniConfFileName: ""

  excludeNamespaces:
    - istio-system

  # Custom annotations on pod level, if you need them
  podAnnotations: {}

  # If this value is set a RoleBinding will be created
  # in the same namespace as the istio-cni DaemonSet is created.
  # This can be used to bind a preexisting ClusterRole to the istio/cni ServiceAccount
  # e.g. if you use PodSecurityPolicies
  psp_cluster_role: ""

  # Deploy the config files as plugin chain (value "true") or as standalone files in the conf dir (value "false")?
  # Some k8s flavors (e.g. OpenShift) do not support the chain approach, set to false if this is the case
  chained: true

  repair:
    enabled: true
    hub: ""
    tag: ""

    labelPods: true
    deletePods: true

    initContainerName: "istio-validation"

    brokenPodLabelKey: "cni.istio.io/uninitialized"
    brokenPodLabelValue: "true"

  # Experimental taint controller for further race condition mitigation
  taint:
    enabled: false